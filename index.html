<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NeuroToolkit</title>

  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0f766e">

  <!-- Minimal base CSS (Pico for layout) -->
  <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@2/css/pico.min.css">
  <!-- Your consistent themes -->
  <link rel="stylesheet" href="css/themes.css">
  <style>
    /* Small layout rules kept here for simplicity */
    body { text-align: center; margin-top: 8vh; }
    h1 { margin-bottom: 2rem; font-size: 2.5rem; color: var(--brand); }

    .voice-btn {
      display:inline-flex; align-items:center; justify-content:center;
      border:0; border-radius:9999px; padding:1.25rem 2rem;
      font-weight:600; font-size:1.1rem; cursor:pointer; color:#fff;
      background: var(--ok); transition: background .2s, transform .1s;
      box-shadow:0 4px 10px rgba(0,0,0,.2);
    }
    .voice-btn.active { background: var(--warn); }
    .voice-btn:active { transform: translateY(1px); }
    .icon { width:2rem; height:2rem; margin-right:.75rem; }

    .voice-status { margin-top:.75rem; font-size:1.1rem; font-weight:600; }
    .rec-row { display:flex; align-items:center; justify-content:center; gap:.5rem; margin-top:.25rem; }
    .timer { display:inline-flex; align-items:center; gap:.4rem; font-weight:600; font-variant-numeric:tabular-nums; }
    .dot { width:10px; height:10px; border-radius:50%; background: var(--warn); opacity:0; transform:scale(.9) }
    .recording .dot { animation:pulse 1.2s ease-in-out infinite; opacity:1 }
    @keyframes pulse { 0%,100%{transform:scale(.9);opacity:.5} 50%{transform:scale(1);opacity:1} }

    .spinner-wrap { display:inline-flex; align-items:center; gap:.6rem; margin-top:.75rem; min-height:2rem; }
    .spinner { width:18px;height:18px;border-radius:50%;border:3px solid var(--border);border-top-color:var(--brand);animation:spin 1s linear infinite; display:none }
    .spinner.show { display:inline-block }
    @keyframes spin { to { transform: rotate(360deg) } }

    .section { max-width:800px; margin:2rem auto; text-align:left; }
    .row { display:flex; align-items:center; justify-content:space-between; gap:.75rem; }
    .transcript { margin-top:.75rem; padding:.75rem; border:1px solid var(--border); border-radius:.5rem; background: var(--card); }
    .transcript p { margin:0 0 .8rem 0; line-height:1.55; }
    .copy-btn { font-size:.85rem; padding:.35rem .6rem; border-radius:.5rem; border:1px solid var(--border); background: var(--surface); }

    /* Hamburger top-left (desktop), bottom-left (mobile) */
    .hamburger {
      position:fixed; left:1rem; z-index:1000; width:42px; height:42px;
      display:inline-flex; align-items:center; justify-content:center;
      border-radius:10px; border:1px solid var(--border); background: var(--glass); backdrop-filter: blur(6px);
      box-shadow:0 2px 8px rgba(0,0,0,.1); top:1rem;
    }
    @media (max-width:768px) { .hamburger { top:auto; bottom:1rem; } }
  </style>
</head>

<body>
  <main class="container">
    <!-- Hamburger -->
    <button id="hamburger" class="hamburger" aria-label="Open menu" aria-expanded="false" aria-controls="menu">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z"></path>
      </svg>
    </button>

    <!-- Slideout menu (rendered by menu.js) -->
    <div id="menu-root"></div>

    <h1>NeuroToolkit</h1>

    <button id="voice-btn" class="voice-btn" aria-pressed="false">
      <svg class="icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M12 14a3 3 0 0 0 3-3V6a3 3 0 1 0-6 0v5a3 3 0 0 0 3 3zm5-3a5 5 0 0 1-10 0H5a7 7 0 0 0 6 6.93V21h2v-3.07A7 7 0 0 0 19 11h-2z"/>
      </svg>
      <span id="voice-btn-label">Start Voice Recognition</span>
    </button>

    <div id="voice-status" class="voice-status">Idle</div>

    <div id="rec-row" class="rec-row" aria-live="polite">
      <span id="timer" class="timer"><span class="dot" aria-hidden="true"></span><span id="timer-text">00:00</span></span>
    </div>

    <div class="spinner-wrap" aria-live="polite">
      <div id="spinner" class="spinner" aria-hidden="true"></div>
      <span id="spinner-text" class="muted"></span>
    </div>

    <div class="section">
      <div class="row"><h2>Transcript</h2></div>
      <div id="transcript" class="transcript" aria-live="polite"></div>
      <div style="margin-top:.6rem;">
        <button id="copy-btn" class="copy-btn" title="Copy transcript">Copy</button>
      </div>
      <p class="muted">Tip: First run downloads the model for offline reuse. Subsequent runs are faster.</p>
    </div>

    <hr style="margin: 2rem 0;" />
    <p>Status: <span id="net-status">checkingâ€¦</span></p>
  </main>

  <!-- Minimal boot; heavy parts are lazy-loaded inside -->
</body>
<script type="module">
  console.log('[modules] inline module executed');
</script>

<script type="module" src="js/main.js"></script>
</html>
